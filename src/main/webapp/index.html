<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous"
    />
    <style>
        html{
            font-family: sans-serif;
        }
        body{
            background-color: #eee;
        }
        .quizz{
            width: 30rem;
            margin: 0 auto;

        }
        #quizz__question{
            font-weight: normal;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
<div class="quizz">
    <h3 id="quizz__question"></h3>
    <input type="submit" onclick="calculator()" value="Nộp bài">
    <input type="submit" onclick="addQuizz()" value="Add">
</div>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
<script>
    load();
    function isCheck(data)
    {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/api/v1/answer/"+data.id,
            success: function (list) {
                for (let i = 0; i < list.length; i++) {
                    console.log(data.radio[i].checked);
                    console.log(list[i].isTrue);
                    if(list[i].isTrue!=1&&data.radio[i].checked!=false||list[i].isTrue!=0&&data.radio[i].checked!=true) {
                        return ;
                    }
                }
            },
           });
    }
    function calculator()
    {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/api/v1/question",
            success: function (list) {
                for (let i = 0; i < list.length; i++) {
                    let radio=document.getElementsByName(list[i].id);
                    console.log(list[i].id);
                    let obj={
                        id:list[i].id,
                        radio:radio,
                    }
                    isCheck(obj);
                }
            },
        });
    }
    function addQuizz(data)
    {


    }
    function loadAnswer(data)
    {
        let str = "";
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/api/v1/answer/"+data.id,
            success: function (list) {
                if(data.type==1)
                {
                    for (let i = 0; i < list.length; i++) {
                        str += `
                                <input type="radio" id="${list[i].id}" name="${data.id}" >
                                <label for="${list[i].id}">${list[i].name}</label><br>
                       `;
                    }
                }
                else{
                    for (let i = 0; i < list.length; i++) {
                        str += `
                                <input type="checkbox" id="${list[i].id}" name="${data.id}" >
                                <label for="${list[i].id}"> ${list[i].name}</label><br>
                       `;
                    }
                }
                document.getElementById('answer'+data.id).innerHTML=str;
            },
        });
    }
    function load() {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/api/v1/question",
            success: function (list) {
                let str = "";
                for (let i = 0; i < list.length; i++) {
                    str += `<h4>Cau hoi ${list[i].id}: ${list[i].content}=</h4>
                <div id="answer${list[i].id}"></div>
                `;
                    loadAnswer(list[i]);
                }
                document.getElementById('quizz__question').innerHTML = str;
            },
        });
    }
</script>

</body>
</html>